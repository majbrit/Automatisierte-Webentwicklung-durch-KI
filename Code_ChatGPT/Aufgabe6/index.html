<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Darkmode Beispiel</title>
  <style>
    /* Farbvariablen (Light = Standard) */
    :root{
      --bg: #ffffff;
      --surface: #f2f4f8;
      --text: #0b1220;
      --muted: #4b5563;
      --primary: #2563eb;
      --accent: #06b6d4;
      --transition: 200ms ease;
    }

    /* Dark-Theme (wird per data-theme="dark" auf <html> gesetzt) */
    html[data-theme="dark"]{
      --bg: #0b0f14;
      --surface: #0f1720;
      --text: #e6eef8;
      --muted: #9aa7b6;
      --primary: #60a5fa;
      --accent: #34d399;
    }

    /* Basis-Layout */
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,var(--bg),var(--surface));
      color:var(--text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      transition:background var(--transition), color var(--transition);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:2rem;
    }

    .card{
      background:rgba(255,255,255,0.03);
      backdrop-filter: blur(6px);
      border-radius:12px;
      padding:2rem;
      width:min(720px,95vw);
      box-shadow:0 8px 30px rgba(2,6,23,0.25);
      border:1px solid rgba(255,255,255,0.04);
    }

    h1{
      margin:0 0 .5rem 0;
      font-size:1.6rem;
      line-height:1.1;
    }

    p{
      margin:0 0 1.25rem 0;
      color:var(--muted);
      font-size:1rem;
    }

    .actions{
      display:flex;
      gap:1rem;
      align-items:center;
    }

    /* Haupt-Button */
    .btn{
      appearance:none;
      border:0;
      background:linear-gradient(180deg,var(--primary),color-mix(in srgb, var(--primary) 80%, black));
      color:white;
      padding:.65rem 1rem;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      transition:transform var(--transition), box-shadow var(--transition), opacity var(--transition);
      box-shadow:0 6px 18px rgba(2,6,23,0.25);
    }
    .btn:active{transform:translateY(1px)}

    /* Darkmode-Schalter (accessibel) */
    .theme-switch{
      display:inline-flex;
      align-items:center;
      gap:.75rem;
      user-select:none;
    }

    .switch{
      --w:46px; --h:26px; --knob:20px;
      position:relative;
      width:var(--w);
      height:var(--h);
      background:linear-gradient(180deg, color-mix(in srgb, var(--surface) 40%, black), var(--surface));
      border-radius:999px;
      padding:3px;
      display:inline-block;
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.03);
      transition:background var(--transition);
      cursor:pointer;
    }

    .switch[data-state="on"]{
      background:linear-gradient(90deg,var(--accent),var(--primary));
    }

    .knob{
      position:absolute;
      top:50%;
      left:3px;
      width:var(--knob);
      height:var(--knob);
      transform:translate(0,-50%);
      border-radius:50%;
      background:linear-gradient(180deg,white, color-mix(in srgb, white 88%, black 12%));
      box-shadow:0 4px 10px rgba(2,6,23,0.35);
      transition:transform var(--transition);
    }

    .switch[data-state="on"] .knob{
      transform:translate(calc(var(--w) - var(--knob) - 6px), -50%);
    }

    /* kleine Hilfstexte */
    .muted{
      font-size:.85rem;
      color:var(--muted);
    }

    /* Fokus sichtbar für Tastaturnutzung */
    .switch:focus, .btn:focus{
      outline:3px solid color-mix(in srgb, var(--primary) 30%, transparent);
      outline-offset:3px;
    }

    @media (prefers-reduced-motion: reduce){
      *{transition:none!important}
    }
  </style>
</head>
<body>
  <main class="card" role="main">
    <header>
      <div style="display:flex;align-items:center;justify-content:space-between;gap:1rem;">
        <div>
          <h1>Darkmode Beispiel-Seite</h1>
          <p class="muted">Ein einfaches Beispiel mit Überschrift, Paragraph und Button plus Darkmode-Schalter.</p>
        </div>
        <div class="theme-switch">
          <label id="themeLabel" class="muted">Hell</label>
          <!-- role="switch" für Accessibility, aria-checked reflektiert Zustand -->
          <div id="themeToggle" class="switch" role="switch" aria-checked="false" tabindex="0" data-state="off" aria-labelledby="themeLabel">
            <div class="knob" aria-hidden="true"></div>
          </div>
        </div>
      </div>
    </header>

    <section style="margin-top:1.5rem;">
      <p>Hier steht ein Beispieltext. Drücke den Knopf, um eine Aktion zu simulieren.
      Der Zustand des Darkmodes wird im Browser-Storage gespeichert und beim nächsten Besuch wiederhergestellt.</p>

      <div class="actions" style="margin-top:1rem;">
        <button class="btn" id="primaryBtn">Klick mich</button>
        <div class="muted">Aktueller Modus: <strong id="currentMode">—</strong></div>
      </div>
    </section>
  </main>

  <script>
    (function(){
      const root = document.documentElement;
      const toggle = document.getElementById('themeToggle');
      const label = document.getElementById('themeLabel');
      const currentModeText = document.getElementById('currentMode');
      const STORAGE_KEY = 'site-theme'; // 'dark' | 'light'

      // Bestimme System-Vorgabe
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');

      function applyTheme(theme){
        if(theme === 'dark'){
          root.setAttribute('data-theme','dark');
          toggle.setAttribute('data-state','on');
          toggle.setAttribute('aria-checked','true');
          label.textContent = 'Dunkel';
          currentModeText.textContent = 'Dunkel';
        } else {
          root.removeAttribute('data-theme');
          toggle.setAttribute('data-state','off');
          toggle.setAttribute('aria-checked','false');
          label.textContent = 'Hell';
          currentModeText.textContent = 'Hell';
        }
      }

      // Lade gespeicherten Zustand oder System-Vorgabe
      function initTheme(){
        try{
          const saved = localStorage.getItem(STORAGE_KEY);
          if(saved === 'dark' || saved === 'light'){
            applyTheme(saved);
            return;
          }
        }catch(e){ /* localStorage evtl. nicht verfügbar */ }

        // fallback: System-Voreinstellung
        applyTheme((prefersDark && prefersDark.matches) ? 'dark' : 'light');
      }

      function toggleTheme(){
        const isDark = root.getAttribute('data-theme') === 'dark';
        const next = isDark ? 'light' : 'dark';
        applyTheme(next);
        try{ localStorage.setItem(STORAGE_KEY, next); }catch(e){}
      }

      // Klick / Touch
      toggle.addEventListener('click', ()=> toggleTheme());

      // Tastaturunterstützung (Space / Enter)
      toggle.addEventListener('keydown', (ev)=>{
        if(ev.code === 'Space' || ev.code === 'Enter'){
          ev.preventDefault();
          toggleTheme();
        }
      });

      // Reagiere, falls Nutzer System-Palette ändert
      if(prefersDark && typeof prefersDark.addEventListener === 'function'){
        prefersDark.addEventListener('change', (e)=>{
          // Wenn Nutzer noch keinen manuellen Präferenz gesetzt hat, dann anpassen
          try{
            const saved = localStorage.getItem(STORAGE_KEY);
            if(!saved) applyTheme(e.matches ? 'dark' : 'light');
          }catch(e){ /* ignore */ }
        });
      }

      // einfache Aktion für den Button
      document.getElementById('primaryBtn').addEventListener('click', ()=>{
        alert('Button wurde geklickt!');
      });

      // initialisiere
      initTheme();
    })();
  </script>
</body>
</html>
