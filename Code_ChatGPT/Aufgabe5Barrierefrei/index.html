<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Barrierefreie 3×3 Tabelle</title>
  <style>
    :root{
      --bg:#ffffff;
      --fg:#0b0b0b;
      --accent:#005a9c; /* blau, guter Kontrast */
      --muted:#6b6b6b;
      --cell-padding:0.6rem 0.8rem;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial;
    }

    html,body{height:100%;background:var(--bg);color:var(--fg);margin:0}
    .wrap{max-width:900px;margin:2rem auto;padding:1rem}

    /* Skip link sichtbar bei Fokus */
    .skip-link{
      position:absolute;left:-999px;top:auto;width:1px;height:1px;overflow:hidden;
    }
    .skip-link:focus{position:static;width:auto;height:auto;left:auto;margin-bottom:1rem;padding:.5rem;background:#fff;border:2px solid var(--accent);}

    h1{font-size:1.5rem;margin:0 0 1rem}
    p.lead{color:var(--muted);margin:0 0 1rem}

    .table-container{overflow:auto;border:1px solid #e6e6e6;border-radius:8px}
    table{border-collapse:collapse;width:100%;min-width:480px}
    caption{caption-side:top;text-align:left;font-weight:600;padding:.8rem .8rem;background:#f7fbff;color:var(--accent)}

    th,td{padding:var(--cell-padding);border-bottom:1px solid #e9eef6;text-align:left}
    thead th{background:#f4f8fb;font-weight:700}

    /* Zeilen hover & focus (hilfreich für Tastaturnavigation) */
    td:focus, th:focus{outline:3px solid rgba(0,90,156,0.18);outline-offset:2px}
    tr:hover td{background:#fbfdff}

    /* Sichtbarer Fokus-Stil für bessere Orientierung */
    [tabindex]:focus{box-shadow:0 0 0 3px rgba(0,90,156,0.12);border-radius:4px}

    /* Responsives Verhalten: Tabelle horizontal scrollbar auf kleinen Bildschirmen */
    @media (max-width:520px){
      table{min-width:420px}
      caption{font-size:.95rem}
    }

    /* Hilfetext unter der Tabelle */
    .help{font-size:.9rem;color:var(--muted);margin-top:.5rem}
  </style>
</head>
<body>
  <a href="#main-table" class="skip-link">Zur Tabelle springen</a>

  <div class="wrap">
    <h1>Beispiel: Barrierefreie 3×3 Tabelle</h1>
    <p class="lead">Diese Seite enthält eine semantisch korrekte Tabelle mit einem Kopf (Header) und zwei Datenzeilen — insgesamt 3 Reihen und 3 Spalten.</p>

    <div class="table-container" role="region" aria-labelledby="table-title">
      <h2 id="table-title" style="position:absolute;left:-9999px;">Kontakttabelle</h2>

      <table id="main-table" aria-describedby="table-desc">
        <caption>Kontaktdaten: Name, Alter und Stadt.</caption>
        <thead>
          <tr>
            <th scope="col" tabindex="0">Name</th>
            <th scope="col" tabindex="0">Alter</th>
            <th scope="col" tabindex="0">Stadt</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td tabindex="0">Anna Müller</td>
            <td tabindex="0">29</td>
            <td tabindex="0">Berlin</td>
          </tr>
          <tr>
            <td tabindex="0">Jonas Becker</td>
            <td tabindex="0">34</td>
            <td tabindex="0">Hamburg</td>
          </tr>
        </tbody>
      </table>

      <p id="table-desc" class="help">Tastaturnavigation: Benutzen Sie Tab, um in die Zellen zu gelangen. Mit den Pfeiltasten ← → ↑ ↓ können Sie zwischen Zellen wechseln.</p>
    </div>

  </div>

  <script>
    // Tastaturnavigation innerhalb der Tabelle: Pfeiltasten bewegen den Fokus zur benachbarten Zelle.
    (function(){
      const table = document.getElementById('main-table');
      if(!table) return;

      table.addEventListener('keydown', function(e){
        const active = document.activeElement;
        if(!active || (active.tagName !== 'TD' && active.tagName !== 'TH')) return;

        const key = e.key;
        const tr = active.parentElement; // <tr>
        const rowIndex = tr.rowIndex; // Relativ zur Tabelle (inkl. thead)
        const cellIndex = active.cellIndex;
        let newRow = rowIndex;
        let newCell = cellIndex;

        if(key === 'ArrowRight') newCell = cellIndex + 1;
        else if(key === 'ArrowLeft') newCell = cellIndex - 1;
        else if(key === 'ArrowDown') newRow = rowIndex + 1;
        else if(key === 'ArrowUp') newRow = rowIndex - 1;
        else return; // andere Tasten ignorieren

        // Verhindern, dass die Seite scrollt
        e.preventDefault();

        // Grenzen prüfen
        if(newRow < 0 || newRow >= table.rows.length) return;
        if(newCell < 0 || newCell >= table.rows[newRow].cells.length) return;

        const target = table.rows[newRow].cells[newCell];
        if(target) target.focus();
      });

      // Sicherstellen, dass alle Zellen ein tabindex haben (falls beim Editieren entfernt)
      Array.from(table.querySelectorAll('th, td')).forEach(cell => {
        if(!cell.hasAttribute('tabindex')) cell.setAttribute('tabindex', '0');
      });

    })();
  </script>
</body>
</html>
